// Form Input Styles

.FormControl {
  border: @retro-border;
  border-radius: 0;
  box-shadow: @retro-inset-shadow;
  transition: box-shadow @retro-transition, border-color @retro-transition;

  &:focus {
    border-color: @primary-color;
    box-shadow: @retro-inset-shadow-focus;
    outline: none;
  }

  &.has-error,
  &:invalid {
    border-color: @error-color;
    box-shadow: inset 2px 2px 0 0 fade(@error-color, 20%);
  }
}

textarea.FormControl {
  resize: vertical;
}

// Select dropdown
.Select .Select-input {
  border: @retro-border;
  border-radius: 0;
  box-shadow: @retro-shadow-default;
  transition: box-shadow @retro-transition;

  &:hover {
    box-shadow: @retro-shadow-hover;
  }
}

// ===========================================
// Checkbox - RetroUI Style
// ===========================================
// Flarum structure:
// <label class="Checkbox [on|off]">
//   <input type="checkbox">
//   <div class="Checkbox-display"><icon></div>
//   text
// </label>

.Checkbox {
  .Checkbox-display {
    border: @retro-border;
    border-radius: 0;
    background: @control-bg;
  }

  &.on .Checkbox-display {
    background: @primary-color;
    color: @text-on-dark;
  }

  &:hover .Checkbox-display {
    border-color: @primary-color;
  }
}

// ===========================================
// Switch - RetroUI Style
// ===========================================
// Flarum structure:
// <label class="Checkbox Checkbox--switch [on|off]">
//   <input type="checkbox">
//   <div class="Checkbox-display"></div>  (uses :before for knob)
//   text
// </label>

.Checkbox--switch {
  // The track
  .Checkbox-display {
    width: 50px;
    height: 28px;
    border: @retro-border;
    border-radius: 0;
    background: @control-bg;
    position: relative;

    // Hide the icon inside
    .icon,
    .LoadingIndicator {
      display: none;
    }

    // The toggle knob - Flarum uses :before
    &:before {
      content: '';
      position: absolute;
      top: 4px;
      left: 4px;
      width: 18px;
      height: 18px;
      background: @muted-color;
      border: @retro-border;
      border-radius: 0;
      transition: left @retro-transition, background @retro-transition;
    }
  }

  // ON state
  &.on .Checkbox-display {
    background: @primary-color;

    &:before {
      left: 26px;
      background: @control-bg;
    }
  }

  // OFF state
  &.off .Checkbox-display {
    background: @control-bg;

    &:before {
      left: 4px;
      background: @muted-color;
    }
  }

  // Disabled
  &.disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  // Loading - show the indicator
  &.loading .Checkbox-display .LoadingIndicator {
    display: flex;
  }
}

// ===========================================
// Toggle Group
// ===========================================

.ButtonGroup--toggle,
.ToggleGroup {
  border: @retro-border;
  border-radius: 0;

  .Button {
    border: none;
    border-right: @retro-border;
    border-radius: 0;
    box-shadow: none;
    background: @control-bg;

    &:last-child {
      border-right: none;
    }

    &:hover {
      background: fade(@primary-color, 15%);
    }

    &.active {
      background: @primary-color;
      color: @text-on-dark;
    }
  }
}
