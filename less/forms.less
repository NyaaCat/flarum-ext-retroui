// Form Input Styles

.FormControl {
  border: @retro-border;
  border-radius: 0;
  box-shadow: @retro-inset-shadow;
  transition: box-shadow @retro-transition, border-color @retro-transition;

  &:focus {
    border-color: @primary-color;
    box-shadow: @retro-inset-shadow-focus;
    outline: none;
  }

  &.has-error,
  &:invalid {
    border-color: @error-color;
    box-shadow: inset 2px 2px 0 0 fade(@error-color, 20%);
  }
}

textarea.FormControl {
  resize: vertical;
}

// Select dropdown
.Select .Select-input {
  border: @retro-border;
  border-radius: 0;
  box-shadow: @retro-shadow-default;
  transition: box-shadow @retro-transition;

  &:hover {
    .retro-shadow-hover-dynamic();
  }
}

// ===========================================
// Checkbox - RetroUI Style
// ===========================================
// Flarum structure:
// <label class="Checkbox [on|off]">
//   <input type="checkbox">
//   <div class="Checkbox-display"><icon></div>
//   text
// </label>

.Checkbox {
  .Checkbox-display {
    border: @retro-border;
    border-radius: 0;
    background: @control-bg;
  }

  &.on .Checkbox-display {
    background: @primary-color;
    color: @text-on-dark;
  }

  &:hover .Checkbox-display {
    border-color: @primary-color;
  }
}

// ===========================================
// Switch - RetroUI Style
// ===========================================
// Flarum structure:
// <label class="Checkbox Checkbox--switch [on|off]">
//   <input type="checkbox">
//   <div class="Checkbox-display"></div>  (uses ::before for knob)
//   text
// </label>

.Checkbox--switch,
.Switch {
  // The track
  .Checkbox-display,
  .Switch-display {
    width: 50px !important;
    height: 28px !important;
    border: @retro-border !important;
    border-radius: 0 !important;
    background: @control-bg !important;
    position: relative !important;

    // Hide all icons and indicators inside
    .icon,
    i,
    svg,
    .LoadingIndicator,
    .fa,
    [class*="fa-"] {
      display: none !important;
      visibility: hidden !important;
    }

    // The toggle knob - use ::before
    &::before {
      content: '' !important;
      position: absolute !important;
      top: 4px !important;
      left: 4px !important;
      width: 18px !important;
      height: 18px !important;
      background: @muted-color !important;
      border: @retro-border !important;
      border-radius: 0 !important;
      transition: left @retro-transition, background @retro-transition !important;
    }
  }

  // ON state
  &.on .Checkbox-display,
  &.on .Switch-display {
    background: @primary-color !important;

    &::before {
      left: 26px !important;
      background: @control-bg !important;
    }
  }

  // OFF state
  &.off .Checkbox-display,
  &.off .Switch-display {
    background: @control-bg !important;

    &::before {
      left: 4px !important;
      background: @muted-color !important;
    }
  }

  // Disabled
  &.disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  // Loading - show the indicator
  &.loading .Checkbox-display .LoadingIndicator,
  &.loading .Switch-display .LoadingIndicator {
    display: flex !important;
    visibility: visible !important;
  }
}

// ===========================================
// Toggle Group
// ===========================================

.ButtonGroup--toggle,
.ToggleGroup {
  border: @retro-border;
  border-radius: 0;

  .Button {
    border: none;
    border-right: @retro-border;
    border-radius: 0;
    box-shadow: none;
    background: @control-bg;

    &:last-child {
      border-right: none;
    }

    &:hover {
      background: fade(@primary-color, 15%);
    }

    &.active {
      background: @primary-color;
      color: @text-on-dark;
    }
  }
}
