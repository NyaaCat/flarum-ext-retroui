// Dark Mode Styles
// Applied when Flarum's @config-dark-mode is enabled

& when (@config-dark-mode) {

  // Adjusted border color for dark mode (use lighter borders)
  @retro-border-color-dark: fade(@text-color, 60%);
  @retro-shadow-default-dark: @retro-shadow-offset @retro-shadow-offset 0 0 fade(@text-color, 20%);
  @retro-shadow-large-dark: 8px 8px 0 0 fade(@text-color, 40%);

  // Header
  .Header {
    border-bottom-color: @retro-border-color-dark;
  }

  // Search input
  .Search-input {
    border-bottom-color: @retro-border-color-dark;
  }

  // Form controls
  .FormControl {
    border-color: @retro-border-color-dark;
  }

  // Posts - only separator border
  .Post {
    border-bottom-color: @retro-border-color-dark;
  }

  // Discussion list items
  .DiscussionListItem {
    &:hover {
      border-color: @retro-border-color-dark;
      box-shadow: @retro-shadow-hover;
    }
  }

  // Sidebar
  .Sidebar .SideNav {
    border-color: @retro-border-color-dark;
    box-shadow: @retro-shadow-default-dark;
  }

  // Dropdowns & Context Menus
  .Dropdown-menu,
  .ContextMenu,
  .Select-dropdown {
    border-color: @retro-border-color-dark;
    box-shadow: @retro-shadow-default-dark;
  }

  .Dropdown-separator,
  .ContextMenu-separator {
    background: @retro-border-color-dark;
  }

  // Modals
  .Modal {
    border-color: @retro-border-color-dark;
    box-shadow: @retro-shadow-large-dark;
  }

  .Modal-header {
    border-bottom-color: @retro-border-color-dark;
  }

  .Modal-footer {
    border-top-color: @retro-border-color-dark;
  }

  // Alerts
  .Alert {
    border-color: @retro-border-color-dark;
    box-shadow: @retro-shadow-default-dark;
  }

  // Composer
  .Composer {
    border-color: @retro-border-color-dark;
  }

  // Tags
  .TagTile {
    border-color: @retro-border-color-dark;
  }

  // ===========================================
  // Toggle / Switch - Dark Mode
  // ===========================================

  // Checkbox
  .Checkbox {
    .Checkbox-display {
      border-color: @retro-border-color-dark;
    }
  }

  // Switch
  .Switch,
  .Checkbox--switch {
    .Switch-display,
    .Checkbox-display {
      border-color: @retro-border-color-dark;

      &::after {
        border-color: @retro-border-color-dark;
      }
    }
  }

  // Toggle Group
  .ToggleGroup,
  .ButtonGroup--toggle {
    border-color: @retro-border-color-dark;

    .Button,
    .ToggleGroup-button {
      &:not(:last-child) {
        border-right-color: @retro-border-color-dark;
      }
    }
  }

  // Toggle button
  .Toggle {
    border-color: @retro-border-color-dark;
  }

  // Radio
  .RadioGroup .Radio .Radio-display {
    border-color: @retro-border-color-dark;
  }

  // ===========================================
  // Loader - Dark Mode
  // ===========================================

  .LoadingIndicator,
  .loading-indicator {
    &::before,
    &::after {
      border-color: @retro-border-color-dark;
    }
  }

  // ===========================================
  // Tooltip - Dark Mode
  // ===========================================

  .tippy-box,
  .Tooltip-content {
    border-color: @retro-border-color-dark !important;
    box-shadow: @retro-shadow-default-dark !important;
  }

  // ===========================================
  // Select - Dark Mode
  // ===========================================

  .Select {
    .Select-input {
      border-color: @retro-border-color-dark;
      box-shadow: @retro-shadow-default-dark;

      &:hover {
        box-shadow: @retro-shadow-hover;
      }
    }
  }

  // ===========================================
  // Action Sheet - Dark Mode
  // ===========================================

  .ActionSheet {
    border-color: @retro-border-color-dark;
    box-shadow: @retro-shadow-large-dark;

    .ActionSheet-item {
      border-bottom-color: @retro-border-color-dark;
    }
  }
}
