// Card and Discussion List Styles

// Discussion list items - clean by default, show on hover
.DiscussionListItem {
  border: @retro-border-width solid transparent;
  border-radius: 0;
  box-shadow: none;
  transition: border-color @retro-transition, box-shadow @retro-transition;
  margin-bottom: 4px;

  &:hover {
    border-color: @retro-border-color;
    // Use dynamic shadow for tag color support
    .retro-shadow-hover-dynamic();
  }

  // Active/unread discussions
  &.active {
    background: fade(@primary-color, 8%);
  }
}

// Individual posts - NO border/shadow, only separator line between posts
.Post {
  border: none;
  border-radius: 0;
  box-shadow: none !important;
  margin-bottom: 0;
  padding-bottom: 16px;

  // Separator line between posts
  &:not(:last-child) {
    border-bottom: @retro-border-light;
  }
}

// Post header - no border
.Post-header {
  border-bottom: none;
}

// Post body - remove borders from all child elements
.Post-body {
  // Remove borders from emoji, images, and other inline elements
  img,
  .emoji,
  .PostMention,
  .UserMention,
  [class*="emoji"],
  [data-emoji] {
    border: none !important;
    box-shadow: none !important;
  }
}

// ===========================================
// Sidebar Navigation - TOC Style (No Border)
// ===========================================

// Reset generic nav classes that Flarum might use
.Nav,
.nav {
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  background: transparent !important;
  list-style: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.Sidebar {
  // Remove border and shadow from container
  .SideNav,
  .Nav,
  nav {
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    background: transparent !important;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  // Navigation items - TOC style with left border indicator
  // Cover all possible selectors Flarum might use
  .SideNav-item,
  .SideNav-link,
  a.SideNav-item,
  li > a,
  .Nav-item,
  .nav-item {
    display: block !important;
    padding: 8px 12px !important;
    padding-left: 14px !important;
    margin-bottom: 2px !important;
    border: none !important;
    border-left: 2px solid transparent !important;
    border-radius: 0 !important;
    background: transparent !important;
    box-shadow: none !important;
    transition: border-color @retro-transition, background @retro-transition, color @retro-transition !important;
    font-size: 14px !important;
    text-decoration: none !important;

    &:hover {
      border-left-color: fade(@text-color, 40%) !important;
      background: fade(@primary-color, 5%) !important;
    }

    &.active {
      border-left-color: @primary-color !important;
      background: fade(@primary-color, 10%) !important;
      font-weight: 600 !important;
    }

    // Remove bottom border between items
    &:last-child {
      border-bottom: none !important;
    }
  }
}

// ===========================================
// Tags Navigation - TOC Style with Depth
// ===========================================

.IndexPage-nav,
.TagsPage-nav {
  .SideNav,
  .Nav,
  nav,
  ul {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
    border-radius: 0 !important;
    list-style: none !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  // Tag links as TOC items - comprehensive selectors
  .TagLinkButton,
  .SideNav-item,
  .SideNav-link,
  a.SideNav-item,
  li > a,
  .Nav-item {
    display: flex !important;
    align-items: center !important;
    padding: 6px 12px !important;
    padding-left: 14px !important;
    margin-bottom: 1px !important;
    border: none !important;
    border-left: 2px solid transparent !important;
    border-radius: 0 !important;
    background: transparent !important;
    box-shadow: none !important;
    transition: border-color @retro-transition, background @retro-transition !important;
    font-size: 14px !important;
    text-decoration: none !important;

    &:hover {
      border-left-color: fade(@text-color, 40%) !important;
      background: fade(@primary-color, 5%) !important;
    }

    &.active {
      border-left-color: @primary-color !important;
      background: fade(@primary-color, 10%) !important;
      font-weight: 600 !important;
    }

    // Tag icon/color dot
    .TagIcon,
    .icon {
      margin-right: 8px;
      flex-shrink: 0;
    }

    // Tag label - remove border from inline tag labels in nav
    .TagLabel {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      border: none !important;
      padding: 0 !important;
      background: transparent !important;
    }
  }

  // Nested tags - increase indentation for depth
  .Sublist,
  .TagLinkButton-children,
  .SideNav-children {
    margin-left: 0;
    padding-left: 0;

    .TagLinkButton,
    .SideNav-item {
      padding-left: 28px;  // Level 2 indentation

      // Even deeper nesting
      .Sublist &,
      .TagLinkButton-children &,
      .SideNav-children & {
        padding-left: 42px;  // Level 3 indentation
      }
    }
  }

  // Alternative: depth via data attribute or class
  .TagLinkButton[data-depth="1"],
  .SideNav-item.depth-1 {
    padding-left: 28px;
  }

  .TagLinkButton[data-depth="2"],
  .SideNav-item.depth-2 {
    padding-left: 42px;
  }

  .TagLinkButton[data-depth="3"],
  .SideNav-item.depth-3 {
    padding-left: 56px;
  }

  // "All Discussions" link
  .SideNav-item:first-child {
    font-weight: 500;
  }
}

// Tags list in sidebar
.TagList {
  border: none;
  box-shadow: none;

  .TagListItem {
    padding: 6px 12px;
    padding-left: 14px;
    border: none;
    border-left: 2px solid transparent;
    transition: border-color @retro-transition, background @retro-transition;

    &:hover {
      border-left-color: fade(@text-color, 40%);
      background: fade(@primary-color, 5%);
    }

    &.active {
      border-left-color: @primary-color;
      background: fade(@primary-color, 10%);
      font-weight: 600;
    }
  }
}

// ===========================================
// Tags Page - Tiles (border only, no shadow)
// ===========================================

.TagTile {
  border: @retro-border;
  border-radius: 0;
  box-shadow: none;
  transition: box-shadow @retro-transition;

  &:hover {
    // Use dynamic shadow for tag color support
    .retro-shadow-hover-dynamic();
  }
}

.TagsPage {
  .TagTile {
    box-shadow: none;
  }
}

// ===========================================
// Tag badges/pills in content
// ===========================================

.TagLabel,
.Badge--tag {
  border: @retro-border;
  border-radius: 0;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: 500;
}

// ===========================================
// Hero sections - use dark gray shadow
// ===========================================
// Hero has a colored background, so use dark shadow for contrast

.Hero,
.TagHero,
[class*="Hero"] {
  &:hover {
    box-shadow: @retro-shadow-dark;
  }
}
