// Card and Discussion List Styles

// Discussion list items - clean by default, show on hover
.DiscussionListItem {
  border: @retro-border-width solid transparent;
  border-radius: 0;
  box-shadow: none;
  transition: border-color @retro-transition, box-shadow @retro-transition;
  margin-bottom: 4px;

  &:hover {
    border-color: @retro-border-color;
    // Use dynamic shadow for tag color support
    .retro-shadow-hover-dynamic();
  }

  // Active/unread discussions
  &.active {
    background: fade(@primary-color, 8%);
  }
}

// Individual posts - NO border/shadow, only separator line between posts
.Post {
  border: none;
  border-radius: 0;
  box-shadow: none !important;
  margin-bottom: 0;
  padding-bottom: 16px;

  // Separator line between posts
  &:not(:last-child) {
    border-bottom: @retro-border-light;
  }
}

// Post header - no border
.Post-header {
  border-bottom: none;
}

// Post body - remove borders from all child elements
.Post-body {
  img,
  .emoji,
  .PostMention,
  .UserMention,
  [class*="emoji"],
  [data-emoji] {
    border: none !important;
    box-shadow: none !important;
  }
}

// ===========================================
// Sidebar Navigation - Clean TOC Style
// ===========================================

// TOC item mixin - defines the clean left-border indicator style
.toc-item() {
  display: flex;
  align-items: center;
  padding: 6px 12px;
  padding-left: 12px;
  margin: 0;
  border: none;
  border-left: 2px solid transparent;
  border-radius: 0;
  background: transparent;
  box-shadow: none;
  font-size: 14px;
  text-decoration: none;
  color: inherit;
  transition: border-color @retro-transition, background @retro-transition;

  &:hover {
    border-left-color: fade(@text-color, 40%);
    background: fade(@primary-color, 5%);
    text-decoration: none;
  }

  &.active {
    border-left-color: @primary-color;
    background: fade(@primary-color, 10%);
    font-weight: 600;
  }
}

// Global reset for sidebar containers
.Sidebar,
.IndexPage-nav,
.TagsPage-nav,
.sideNav {
  border: none;
  border-radius: 0;
  box-shadow: none;
  background: transparent;

  // Reset all inner containers
  .SideNav,
  .TagLinkButton-children,
  .Sublist,
  ul, ol {
    border: none;
    border-radius: 0;
    box-shadow: none;
    background: transparent;
    list-style: none;
    padding: 0;
    margin: 0;
  }
}

// Apply TOC style to tag navigation links
.IndexPage-nav .TagLinkButton,
.TagsPage-nav .TagLinkButton,
.Sidebar .TagLinkButton {
  .toc-item();

  // Tag icon
  .TagIcon {
    margin-right: 8px;
    flex-shrink: 0;
    width: 14px;
    height: 14px;
  }

  // Tag label text - remove all styling
  .TagLabel {
    border: none;
    border-radius: 0;
    padding: 0;
    background: transparent;
    font-size: inherit;
  }
}

// Apply TOC style to generic sidebar items
.Sidebar .SideNav-item,
.Sidebar .sideNavItem,
.Sidebar .SideNav > li > a,
.sideNav-item {
  .toc-item();
}

// Nested/child tags - indentation
.TagLinkButton-children .TagLinkButton,
.Sublist .TagLinkButton {
  padding-left: 28px;  // Level 2
}

.TagLinkButton-children .TagLinkButton-children .TagLinkButton,
.Sublist .Sublist .TagLinkButton {
  padding-left: 42px;  // Level 3
}

// Depth via data attribute
.TagLinkButton[data-depth="1"] { padding-left: 28px; }
.TagLinkButton[data-depth="2"] { padding-left: 42px; }
.TagLinkButton[data-depth="3"] { padding-left: 56px; }

// Override Flarum dropdown styling when used for nav
.IndexPage-nav,
.TagsPage-nav {
  .Dropdown-toggle {
    border: none;
    box-shadow: none;
    background: transparent;
    padding: 0;

    &:hover,
    &:focus {
      box-shadow: none;
      background: transparent;
    }

    &::after {
      display: none;
    }
  }

  .Dropdown-menu {
    position: static;
    border: none;
    box-shadow: none;
    background: transparent;
    padding: 0;
    margin: 0;
    display: block;
    animation: none;
  }
}

// TagList component (alternative tag display)
.TagList {
  border: none;
  box-shadow: none;

  .TagListItem {
    .toc-item();
  }
}

// ===========================================
// Tags Page - Tiles
// ===========================================

.TagTile {
  border: @retro-border;
  border-radius: 0;
  box-shadow: none;
  transition: box-shadow @retro-transition;

  &:hover {
    .retro-shadow-hover-dynamic();
  }
}

.TagsPage .TagTile {
  box-shadow: none;
}

// ===========================================
// Tag badges/pills in content
// ===========================================

.TagLabel,
.Badge--tag {
  border: @retro-border;
  border-radius: 0;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: 500;
}

// ===========================================
// Hero sections - dark gray shadow
// ===========================================

.Hero,
.TagHero,
[class*="Hero"] {
  &:hover {
    box-shadow: @retro-shadow-dark;
  }
}
